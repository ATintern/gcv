<!-- right slider -->
<right-slider [hide]="rightSliderHidden">

  <!-- legend -->
  <app-legend class="row vertical-fill"
    [microTracks]="microTracks"
    [colors]="colors"
    [args]="legendArgs" >
  </app-legend>

  <!-- local and global dot plots -->
  <div class="plots" *ngIf="showLocalGlobalPlots">
    <div class="navbar navbar-default navbar-static-top">
      <div class="container-fluid">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
        </div>
        <div class="collapse navbar-collapse">
          <ul class="nav navbar-nav tabs">
            <li [ngClass]="{'active': selectedPlot==plotTypes.LOCAL}">
              <a (click)="showLocalPlot()">Local</a>
            </li>
            <li [ngClass]="{'active': selectedPlot==plotTypes.GLOBAL}">
              <a (click)="showGlobalPlot()">Global</a>
            </li>
          </ul>
          <ul class="nav navbar-nav navbar-right">
            <li>
              <a><span class="glyphicon glyphicon glyphicon-remove pull-right" aria-hidden="true" (click)="hideLocalGlobalPlots()"></span></a>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <div class="outer-ratio">
      <div class="inner-ratio" [ngSwitch]="selectedPlot">
        <plot *ngSwitchCase="plotTypes.LOCAL"
          [plot]="selectedLocal"
          [colors]="colors"
          [args]="plotArgs" >
        </plot>
        <plot *ngSwitchCase="plotTypes.GLOBAL"
          [plot]="selectedGlobal"
          [colors]="colors"
          [args]="plotArgs" >
        </plot>
      </div>
    </div>
  </div>

</right-slider>


<!-- main content area -->
<main>

  <!-- header -->
  <header>
		<ul class="nav navbar-nav tabs">
      <li><toggle-button (toggleFn)="selectParams()">Parameters</toggle-button></li>
      <li><help></help></li>
      <li [ngClass]="{'active': selectedContent==contentTypes.VIEWERS}">
        <a (click)="showViewers()">Viewers</a>
      </li>
      <li [ngClass]="{'active': selectedContent==contentTypes.PLOTS}">
        <a (click)="showPlots()">Dot Plots</a>
      </li>
    </ul>
    <ul class="nav navbar-nav navbar-right">
      <li><toggle-button (toggleFn)="toggleRightSlider()">Legend</toggle-button></li>
    </ul>
  </header>

  <!-- main content -->
  <div [ngSwitch]="selectedContent">

    <!-- micro/macro viewers -->
    <main-content *ngSwitchCase="contentTypes.VIEWERS">
      <div class="split">
        <div #splitTop class="split-top">
          <macro-viewer
            [tracks]="macroTracks"
            [args]="macroArgs" >
          </macro-viewer>
        </div>
        <div #splitBottom class="split-bottom">
          <micro-viewer
            [tracks]="microTracks"
            [colors]="colors"
            [args]="microArgs" >
          </micro-viewer>
        </div>
      </div>
    </main-content>

    <!-- all local plots -->
    <main-content *ngSwitchCase="contentTypes.PLOTS">
      <div class="row">
        <div class="col-sm-6 col-md-4" *ngFor="let p of microPlots">
          <div class="thumbnail">
            <plot
              [plot]="p"
              [colors]="colors"
              [args]="plotArgs" >
            </plot>
          </div>
        </div>
      </div>
    </main-content>

  </div>

  <!-- footer -->
  <footer>
    <app-regexp></app-regexp>
    <app-ordering></app-ordering>
    <scroll [gene]="routeGene" [query]="queryGenes"></scroll>
  </footer>

</main>


<!-- left slider -->
<left-slider [selected]="selectedDetail" [tracks]="microTracks">
  <search-params [source]="routeSource" [gene]="routeGene"></search-params>
</left-slider>
